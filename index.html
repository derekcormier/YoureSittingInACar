<!DOCTYPE html>
<html>

<head>
<title>You're In A Car</title>
<style>
	#Inputs, #Resources{
		position:relative;
		float: left;
		margin: 1%;
	}
	input{
		width: 90px;
	}
	p{
		display: inline;
	}
	div#wrapper{
		display: inline-flex;
		margin-left:25%;
	}
	div#Content{
		overflow: hidden;
		position:relative;
		width: 200px;
		height: 500px;
		margin: auto;
	}
	div#fader{
		height:100%;
		width:100%;
		position:absolute;
		top:0px;
		left:0px;
		background-color:white;
		background:linear-gradient(rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1)100%);
	}
	.text{
		padding-bottom: 10px;
	}
	#rev, #shiftGears, #getGas{
		display:none;
	}
</style>

<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
<script src="jquery.timer.js"></script>
<script type="text/javascript">
	var revs = 0;
	var gear = 1;
	var sponsors = 0;
	var interested = false;
	var present = false;
	shutdown = true;
	var gas = 5;
	
	function startEngine(){
		$('#Content').prepend('<div class="text">The engine roars to life</div>');
		$('#startEngine').prop("disabled", true);
		$('#rev').fadeIn();
		$('#revResource').fadeIn();
		revs = 1000;
		$('#revValue').text(revs);
		setInterval(function(){
			if (revs > 0){
				revs = revs - 1;
				$('#revValue').text(revs);
			}
		},100);
	}
	
	function revEngine(){
		if (checkForGas()){
			if (revs < 7000){
				$('#Content').prepend('<div class="text">The engine roars loudly</div>');
				revs = revs + 700;
				gas = gas - 1;
				$('#revValue').text(revs);
				$('#gasValue').text(gas);
				if (revs >= 5000){
					$('#Content').prepend('<div class="text">The engine begins to purr</div>')
					$('#shiftGears').fadeIn().prop("disabled",false);
				}
			}
			if (revs >= 7000){
				$('#Content').prepend('<div class="text">The engine sounds like it is being pushed to the limit</div>');
			}
		}
		else{
			if (shutdown){
				$('#Content').prepend('<div class="text">The car sputters and the engine cuts out</div>');
				shutdown = false;
			}
			else{
				$('#Content').prepend('<div class="text">You&#39;re out of gas and the car wont run</div>');
			}
		}
		
		if (sponsors < 1){
			if (interested){
				if (present){
					$('#Content').prepend('<div class="text">The man walks up and says he likes your style and offers to be a sponsor and pay for some of your gas</div>');
					sponsors = sponsors + 1;
				}
				else{
					$('#Content').prepend('<div class="text">The man looks over again and starts to walk over</div>');
					present = true;
				}

			}
			else{
				$('#Content').prepend('<div class="text">You notice a man look over at your car</div>');
				interested = true;
			}
		}
		
	}
	
	function checkForGas(){
		if (gas === 3 && $('#gasResource').css('display')==='none'){
			$('#gasValue').text(gas);
			$('#gasResource').fadeIn();
			$('#getGas').fadeIn();
		}
		if (gas > 0){
			return true;
		}

	}
	
	function shiftGears(){
		$('#Content').prepend('<div class="text">The engine skips a note and then begins to build again</div>');
		revs = revs - 3000;
		$('#revValue').text(revs);
		gear = gear + 1;
		$('#gearValue').text(gear);
		$('#shiftGears').prop("disabled", true);
	}
	
	function getGas(){
		shutdown = true;
		$('#Content').prepend('<div class="text">You walk over to the pit and scrounge up some gas</div>');
		gas = gas + 5;
		$('#gasValue').text(gas);
	}
	
</script>

</head>



<body>
	<div id="wrapper">
		<div id="Content">
			<div class="text">
				You are in a car
			</div>
			<div id="fader"></div>
		</div>
		<div id="Inputs">
			<input id="startEngine" type="button" onclick="startEngine()" value="Start Engine"/><br>
			<input id="rev" type="button" onclick="revEngine()" value="Rev Engine"/><br>
			<input id="shiftGears" type= "button" onclick="shiftGears()" value="Shift Gears"/>
			<input id="getGas" type= "button" onclick="getGas()" value="Get Gas"/>
		</div>
		<div id="Resources">
			<div id="revResource"style="display:none;">
				<p>Revs:</p>
				<p id="revValue">0</p>
			</div>
			<div id="gearResource" style="display:none;">
				<p>Gear:</p>
				<p id="gearValue">Neutral</p>
			</div>
			<div id="gasResource" style="display:none;">
				<p>Gas:</p>
				<p id="gasValue">0</p>
			</div>
		</div>
	</div>
</body>
</html>